<div ng-controller="RookCtl">
  <div class="container-fluid">
    <div class="row">
      <div class="col-xs-3" ng-class="{playing: p === public.player || state === 'Bidding' && p === public.bidder}" ng-repeat="p in ['n','e','s','w']">
        <div style="align:center">{{players[p].name}}</div>
        <div ng-if="players[p].bid || players[p].pass">
          <span ng-show="players[p].pass">Pass</span>
          <span ng-hide="players[p].pass">{{players[p].bid}}</span>
        </div>
        <div ng-class="{lead: p === last.leader, winner: p === last.winner}" class="suit_{{last[p].suit()}}">{{last[p].str}}</div>
      </div>
    </div>
  </div>
  <div id="waiting-tab" ng-show="state === 'WaitingForPlayers'">
    Waiting for players to join...<br>
    <button type="button" class="btn btn-danger" ng-click="start()">Start with current players</button>
  </div>
  <div ng-show="state === 'Dealing' && public.dealer==id">
    <button type="button" class="btn btn-primary" ng-click="deal()">Deal</button>
  </div>
  <div ng-show="state === 'Dealing' && public.dealer!=id">
    <span>Waiting for {{players[dealer].name}} to deal...</span>
  </div>
  <div ng-show="state === 'Bidding' && public.bidder==id">
    <label size="5" for="bid-spinner">Bid:</label>
    <input ng-model="bid.bid" min="bid_min" max="bid_max" ng-pattern="/\d+[05]/">
    <button type="button" class="btn btn-primary" ng-click="makeBid()">Bid</button>
    <button type="button" class="btn btn-danger" ng-click="pass()">Pass</button>
  </div>
  <div ng-show="state === 'Bidding' && public.bidder!=id">
    <span>Waiting for {{players[bidder].name}} to bid...</span>
  </div>
  <div ng-show="state === 'Declaring' && public.bidder == id">
    <div class="btn-group btn-group-vertical" style="float: left; margin-top: 3em">
      <button class="btn btn-danger" ng-model="bid.trump" btn-radio="'R'">Red</button>
      <button class="btn btn-success" ng-model="bid.trump" btn-radio="'G'">Green</button>
      <button class="btn btn-warning" ng-model="bid.trump" btn-radio="'Y'">Yellow</button>
      <button class="btn btn-primary" ng-model="bid.trump" btn-radio="'B'">Blue</button>
    </div>
    <div class="nest">
      Choose cards to return to nest<br>
      <div class="card suit_{{c.suit()}}" ng-repeat="c in bid.nest" ng-click="remove()">
        <span>{{c.str}}</span>
      </div>
    </div>
    <button type="button" class="btn btn-default" ng-click="declare()">Declare</button>
    <br clear="all">
    <br clear="all">
  </div>
  <div ng-show="state === 'PlayTricks'">
    <div class="nest">
      Trump is <span class="suit_{{public.trump}}">{{color[public.trump]}}</span><br>
      <div class="card suit_{{public.trick[p].suit()}}" ng-repeat="p in ['n', 'e', 's', 'w']">
        <span>{{public.trick[p].str}}</span>
      </div>
    </div>
    <br clear="all">
    <br clear="all">
  </div>
  <div id="hand">
    <div class="card suit_{{c.suit()}}" ng-repeat="c in private.cards.cards" ng-click="clicked()">
      <span>{{c.str}}</span>
    </div>
  </div>
</div>
